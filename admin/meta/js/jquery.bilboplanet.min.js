$(document).ready(function(d){b();d(window).bind("resize",function(){b()});function b(){var f=d("#BP_head").height();var g=d(window).width();var e=d(window).height();var h=e-f;d("#BP_separator").css("height",h);d("#BP_page").css("height",h);d("#bp_pannel").css("height",h)}d('a[id="BP_Logout"]').click(function(g){g.preventDefault();if(d(this).attr("rel")){var f=d(this).attr("rel");d(location).attr("href",f)}});d("a[name=modal]").click(function(i){i.preventDefault();var k=d(this).attr("href");var g=d(window).height();var j=d(window).width();d("#mask").css({width:j,height:g});d("#mask").fadeTo("slow",0.5);var h=d(window).height();var f=d(window).width();d(k).css("top",h/2-d(k).height()/2);d(k).css("left",f/2-d(k).width()/2);d(k).fadeIn(2000)});d(".window .close").click(function(f){f.preventDefault();d("#mask").hide();d(".window").hide()});d("#mask").click(function(){d(this).hide();d(".window").hide()});d.fn.tips=function(f){e={type:"title",offsetX:10,offsetY:-5,delay:500,baseLine:"middle"};var e=d.extend(e,f);return this.each(function(){var h=d(this);var i=h.attr("title")||"";var g=h.attr("rel")||"";var j="";var k;h.mouseover(function(l){h.attr("title","");if(i){j=d("<div class='tip-text'><span>"+i+"</span></div>")}if(e.type=="rel"){if(g){j=d("<div class='tip-text'><span>"+g+"</span></div>")}}j.appendTo("body").hide().css({position:"absolute",top:0,left:0});h.mousemove(function(m){j.css({left:m.pageX+e.offsetX+"px",top:m.pageY+e.offsetY+"px"})});k=setTimeout(function(){j.show()},e.delay)});h.mouseout(function(l){clearTimeout(k);h.attr("title",i);h.unbind("mousemove");j.remove()})})};d("#checkAllCheckboxes").click(function(){var e=this.checked;d("input[id='checkAll']").each(function(){this.checked=e})});var c=d.fn.preview=function(g){var f={opacity:"0.8",text:{preview:"Preview",close:"Close"}};var e=d.extend(f,g);var h=d(document.createElement("div")).css({display:"none",opacity:e.opacity}).attr("id","overlay");d("body").append(h);return this.each(function(){var i=d(this);var j=d(document.createElement("input")).attr({value:e.text.close,type:"button"}).addClass("button close");var l=d(document.createElement("div")).addClass("preview_div");var n=d(document.createElement("p")).addClass("preview_header").text(e.text.preview+":");var k=d(document.createElement("div")).addClass("preview_message");var m=d(document.createElement("div")).addClass("preview_footer");m.append("<hr />");m.append(j);l.append(n).append(k).append(m);l.fadeIn(4000);h.after(l);h.fadeIn(2000);h.fadeTo("slow",e.opacity);k.hide().html(a(i.val())).fadeIn(6000);d(".preview_message").find("code").each(function(){d(this).html(d(this).html().replace("/&/&amp,").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"))});j.click(function(){h.fadeOut(e.fade);l.fadeOut(e.fade,function(){k.empty()});i.focus();l.empty;n.empty;k.empty;m.empty})})};function a(e){e=e.replace(/\n/g,"<br />");e=e.replace(/\n\n+/g,"<br /><br />");return e}d("#BP_separator").click(function(){var f="#bp_pannel";var e=d("#bp_pannel").width();var g=d(f).css("marginLeft");if(g=="0px"){d(f).animate({marginLeft:"-"+e+"px"},500)}else{d(f).animate({marginLeft:"0px"},500)}});d.fn.flashmsg=function(){var h=false;var i=d(this).attr("class");if(i=="flash_notice alert alert-info"){var h=true}var g=d(this).html();var f=d(document.createElement("div")).css({display:"none"}).attr("class","flash_overlay").attr("id","flash_overlay");var e=d(document.createElement("div")).attr("class","flash_box").attr("id","flash_box").addClass(i);d(e).html('<a class="flash_box_close" id="flash_box_close"></a>\n'+d(this).html());d("body").append(f).append(e);d("#flash_overlay").fadeIn("fast",function(){d("#flash_box").animate({top:"160px"},500);if(h){setTimeout(function(){d("#flash_box_close").click()},3000)}});d(document).keypress(function(j){if(d("#flash_overlay").length!=0){if(j.keyCode=="27"||j.keyCode=="13"){d("#flash_box_close").click();if(j.keyCode=="13"){return false}else{return true}}}});d('#flash_box_close, #flash_overlay, #flash_box, input[type="button"], input[type="submit"]').click(function(){d("#flash_box").animate({top:"-200px"},500,function(){d("#flash_overlay").fadeOut("fast");i.empty;g.empty;e.remove();f.remove()})})}});
